(this.webpackJsonpledger=this.webpackJsonpledger||[]).push([[0],{348:function(t,e,a){t.exports=a(614)},354:function(t,e,a){},361:function(t,e,a){},425:function(t,e,a){},612:function(t,e,a){},613:function(t,e,a){},614:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),c=a(9),r=a.n(c),l=(a(353),a(354),a(111)),o=a(78),s={tableData:[],chosenMonth:"",input:"0",output:"0"},u=a(317),m=a(41),h=a.n(m),p=a(162),d=function(t){return t<10?"0"+t:t},b=function(t,e){var a=JSON.stringify(e);localStorage.setItem(t,a)},v=function(t){return localStorage.getItem(t)?JSON.parse(localStorage.getItem(t)):[]},f=function(){var t=new Date;return t.getFullYear()+"-"+d(t.getMonth()+1)+"-"+d(t.getDate())},y=function(t){var e={type:"getTableData",value:t};x.dispatch(e)},g=function(t,e){var a={type:"initTableData",value:t,month:e};x.dispatch(a)},E=function(t,e){var a={type:"submitCreate",value:t,isUpdate:e};x.dispatch(a)},D=function(t){var e={type:"delActivity",value:t};x.dispatch(e)},O=h.a.mark(N);function k(t){var e=v("tableData");g(e,t.value)}function j(t){var e=v("tableData");if(t.isUpdate)for(var a=0;a<e.length;a++)e[a].id===t.value.id&&(e[a]=t.value,b("tableData",e));else try{e.push(t.value),b("tableData",e)}catch(i){var n=[t.value];b("tableData",n)}}function C(t){for(var e=v("tableData"),a=0;a<e.length;a++)e[a].id===t.value.id&&e.splice(a,1);b("tableData",e),g(e,t.value.date.substring(0,7))}function N(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(p.a)("getTableData",k);case 2:return t.next=4,Object(p.a)("submitCreate",j);case 4:return t.next=6,Object(p.a)("delActivity",C);case 6:case"end":return t.stop()}}),O)}var M=N,S=Object(u.a)(),w=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):o.c)(Object(o.a)(S)),T=Object(o.d)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,e=arguments.length>1?arguments[1]:void 0,a=JSON.parse(JSON.stringify(t));if("initTableData"===e.type){var n=0,i=0;a.tableData=e.value.filter((function(t){return t.date.substring(0,7)===e.month})),a.tableData.forEach((function(t){"outcome"===t.category.type?i+=Number(t.price):"income"===t.category.type&&(n+=Number(t.price))})),a.input=n,a.output=i}return"setMonth"===e.type&&(a.chosenMonth=e.value),a}),w);S.run(M);var x=T,Y=a(289);a.n(Y).a.mock("/api/getList",{data:[{id:1,title:"\u6210\u90fd\u65c5\u884c",price:3265,date:"2020-02-26",category:{id:1,name:"\u65c5\u884c",type:"outcome"}},{id:2,title:"\u4e70iphone11",price:200,date:"2020-03-26",category:{id:1,name:"\u8d2d\u7269",type:"outcome"}},{id:3,title:"\u7ed9\u5bcc\u5a46\u6309\u6469",price:200,date:"2020-02-26",category:{id:1,name:"\u6253\u5de5",type:"income"}}]});var P=a(29),_=a(32),A=a(44),I=a(45),F=a(46),J=a(91),R=a(83),W=a(615),B=a(18),H=a(315),K=a(76),L=a.n(K),U=(a(360),a(361),a(35)),X=a(621),V=X.a.MonthPicker,z=function(t){return i.a.createElement("div",null,i.a.createElement("span",null,"\u9009\u62e9\u6708\u4efd:"),i.a.createElement(V,{onChange:t.changeMonth,defaultValue:L()(t.month,"YYYY-MM"),format:"YYYY-MM"}))},$=(a(425),Object(l.b)((function(t){return{inputPrice:t.input,outputPrice:t.output}}),(function(t){return{}}))((function(t){return i.a.createElement("div",{className:"TotalPrice-ctn"},i.a.createElement("div",null,i.a.createElement("span",null,"\u6536\u5165"),i.a.createElement("span",null,"\uffe5",t.inputPrice)),i.a.createElement("div",null,i.a.createElement("span",null,"\u652f\u4ed8"),i.a.createElement("span",null,"\uffe5",t.outputPrice)))}))),q=a(617),G=a(630),Q=a(631),Z=a(618),tt=a(318),et=a(616),at=a(625),nt=Z.a.confirm,it=function(t){function e(t){var a;return Object(P.a)(this,e),(a=Object(A.a)(this,Object(I.a)(e).call(this,t))).state={tableData:t.items},a}return Object(F.a)(e,t),Object(_.a)(e,[{key:"componentWillReceiveProps",value:function(t){this.setState((function(){return{tableData:t.items}}))}},{key:"render",value:function(){var t=this,e=[{title:"\u7c7b\u522b",dataIndex:"category",key:"category",render:function(t,e){return i.a.createElement(tt.a,{color:"volcano"},e.category.name)}},{title:"\u6d3b\u52a8",dataIndex:"title",key:"title"},{title:"\u6536\u652f",dataIndex:"price",key:"price",width:"200px",render:function(t,e){return i.a.createElement("span",null,(a=e.category.type,n=e.price,"outcome"===a?"-"+n:"+"+n));var a,n}},{title:"\u65e5\u671f",dataIndex:"date",key:"date",width:"200px"},{title:"\u64cd\u4f5c",key:"ops",width:"200px",render:function(e,a){return i.a.createElement("div",null,i.a.createElement(U.a,{type:"link",onClick:function(){t.handleDel(e,a)}},"\u5220\u9664"),i.a.createElement(U.a,{type:"link",onClick:function(){t.handleEdit(e,a)}},"\u7f16\u8f91"))}}];return i.a.createElement("div",null,i.a.createElement(et.a,{style:{marginBottom:"30px"},pagination:!1,bordered:!0,rowKey:function(t){return t.id},columns:e,dataSource:this.state.tableData}))}},{key:"handleDel",value:function(t,e){nt({title:"\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u6761\u6570\u636e\u5417?",icon:i.a.createElement(at.a,null),content:"Some descriptions",okText:"\u786e\u8ba4",okType:"primary",cancelText:"\u53d6\u6d88",onOk:function(){D(t)}}),this.setState((function(){return{visible:!1}}))}},{key:"handleEdit",value:function(t,e){this.props.history.push("/edit/".concat(t.id))}}]),e}(i.a.Component),ct=Object(R.e)(it),rt=a(47),lt=a(70),ot=(a(612),["#0088FE","#00C49F","#FFBB28","#FF8042"]),st=function(t){function e(t){var a;return Object(P.a)(this,e),(a=Object(A.a)(this,Object(I.a)(e).call(this,t))).state={inputData:[],outputData:[]},a.initChartData=a.initChartData.bind(Object(rt.a)(a)),a}return Object(F.a)(e,t),Object(_.a)(e,[{key:"componentWillMount",value:function(){this.setState({outputData:this.initChartData("outcome"),inputData:this.initChartData("income")})}},{key:"componentWillReceiveProps",value:function(t){this.setState({outputData:this.initChartData("outcome",t.items),inputData:this.initChartData("income",t.items)})}},{key:"render",value:function(){var t=null,e=null;return t=this.state.inputData[0]?i.a.createElement("div",{className:"charts-item"},i.a.createElement(lt.c,{width:400,height:380},i.a.createElement(lt.b,{dataKey:"value",isAnimationActive:!0,data:this.state.inputData,cx:200,cy:200,outerRadius:120,fill:"#8884d8",label:!0},this.state.inputData.map((function(t,e){return i.a.createElement(lt.a,{key:"cell-".concat(e),fill:ot[e%ot.length]})}))),i.a.createElement(lt.d,null)),i.a.createElement("div",{className:"chart-dir"},"\u6536\u5165")):i.a.createElement("div",{className:"chart-dir"},"\u672c\u6708\u6ca1\u6709\u6536\u5165"),e=this.state.outputData[0]?i.a.createElement("div",{className:"charts-item"},i.a.createElement(lt.c,{width:400,height:380},i.a.createElement(lt.b,{dataKey:"value",isAnimationActive:!0,data:this.state.outputData,cx:200,cy:200,outerRadius:120,fill:"#8884d8",label:!0},this.state.outputData.map((function(t,e){return i.a.createElement(lt.a,{key:"cell-".concat(e),fill:ot[e%ot.length]})}))),i.a.createElement(lt.d,null)),i.a.createElement("div",{className:"chart-dir"},"\u652f\u51fa")):i.a.createElement("div",{className:"chart-dir"},"\u672c\u6708\u6ca1\u6709\u652f\u51fa"),i.a.createElement("div",{className:"charts-ctn"},t,e)}},{key:"initChartData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.items,a={},n=[];for(var i in e.filter((function(e){return e.category.type===t})).forEach((function(t){a[t.category.name]?a[t.category.name].value+=1*t.price:a[t.category.name]={name:t.category.name,value:1*t.price}})),a)n.push(a[i]);return n}}]),e}(n.PureComponent),ut=q.a.TabPane,mt=Object(l.b)((function(t){return{items:t.tableData}}),(function(t){return{}}))((function(t){return i.a.createElement(q.a,{defaultActiveKey:"1"},i.a.createElement(ut,{tab:i.a.createElement("span",null,i.a.createElement(G.a,null),"\u5217\u8868"),key:"1"},i.a.createElement(ct,{items:t.items})),i.a.createElement(ut,{tab:i.a.createElement("span",null,i.a.createElement(Q.a,null),"\u56fe\u8868"),key:"2"},i.a.createElement(st,{items:t.items})))})),ht=function(t){function e(t){var a;return Object(P.a)(this,e),(a=Object(A.a)(this,Object(I.a)(e).call(this,t))).state={chosenMonth:""},a}return Object(F.a)(e,t),Object(_.a)(e,[{key:"componentWillMount",value:function(){this.initPage()}},{key:"render",value:function(){return i.a.createElement("div",{className:"main"},i.a.createElement("div",{className:"main-top"},i.a.createElement(z,{month:this.state.chosenMonth,changeMonth:this.changeMonth}),i.a.createElement($,null)),i.a.createElement(J.b,{to:"/Create"},i.a.createElement(U.a,{type:"primary"},"\u65b0\u589e")),i.a.createElement(mt,null))}},{key:"changeMonth",value:function(t,e){y(e)}},{key:"initPage",value:function(){var t=function(){var t=new Date;return t.getFullYear()+"-"+d(t.getMonth()+1)}();this.setState((function(){return{chosenMonth:t}})),y(t)}}]),e}(i.a.PureComponent),pt=a(115),dt=a(619),bt=a(620),vt=(a(613),function(t){return i.a.createElement("div",{className:"tags-ctn"},t.tags.map((function(e,a){return i.a.createElement("div",{key:e,className:e===t.categoryName?"tags-item tags-item-active":"tags-item",onClick:function(){t.chooseClass(e)}},i.a.createElement("div",{className:"tags-icon"},e.substring(0,1)),i.a.createElement("div",{className:"tags-text"},e))})))}),ft=q.a.TabPane,yt=function(t){function e(t){var a;return Object(P.a)(this,e),(a=Object(A.a)(this,Object(I.a)(e).call(this,t))).state={inputTags:["\u5de5\u8d44","\u5916\u5feb","\u6b20\u6b3e\u56de\u6536","\u80a1\u7968","\u57fa\u91d1","\u9ec4\u91d1","\u671f\u8d27","\u5176\u4ed6"],outputTags:["\u996e\u98df","\u8d2d\u7269","\u517b\u751f","\u5065\u8eab","\u501f\u503a","\u6295\u8d44","\u4e8f\u635f","\u65c5\u884c","\u5176\u4ed6"],submitData:{id:Math.random(),title:"",price:"",date:f(),category:{name:"\u996e\u98df",type:"outcome"}}},a.toggleTabs=a.toggleTabs.bind(Object(rt.a)(a)),a.dateChange=a.dateChange.bind(Object(rt.a)(a)),a.inputChange=a.inputChange.bind(Object(rt.a)(a)),a.chooseClass=a.chooseClass.bind(Object(rt.a)(a)),a.backHome=a.backHome.bind(Object(rt.a)(a)),a.submitData=a.submitData.bind(Object(rt.a)(a)),a.getActivityDetail=a.getActivityDetail.bind(Object(rt.a)(a)),a}return Object(F.a)(e,t),Object(_.a)(e,[{key:"componentDidMount",value:function(){this.props.match.params.id&&this.getActivityDetail(this.props.match.params.id)}},{key:"render",value:function(){return i.a.createElement("div",{className:"create-ctn"},i.a.createElement(q.a,{defaultActiveKey:"outcome",onChange:this.toggleTabs},i.a.createElement(ft,{tab:"\u652f\u51fa",key:"outcome"},i.a.createElement(vt,{tags:this.state.outputTags,categoryName:this.state.submitData.category.name,chooseClass:this.chooseClass})),i.a.createElement(ft,{tab:"\u6536\u5165",key:"income"},i.a.createElement(vt,{tags:this.state.inputTags,categoryName:this.state.submitData.category.name,chooseClass:this.chooseClass}))),i.a.createElement("div",{className:"form-item-ctn"},i.a.createElement("span",null,i.a.createElement("label",{style:{color:"red"}},"*"),"\u6d3b\u52a8"),i.a.createElement(dt.a,{type:"text",value:this.state.submitData.title,onChange:this.inputChange,name:"title"})),i.a.createElement("div",{className:"form-item-ctn"},i.a.createElement("span",null,i.a.createElement("label",{style:{color:"red"}},"*"),"\u91d1\u989d"),i.a.createElement(dt.a,{type:"number",value:this.state.submitData.price,onChange:this.inputChange,name:"price"})),i.a.createElement("div",{className:"form-item-ctn"},i.a.createElement("span",null,i.a.createElement("label",{style:{color:"red"}},"*"),"\u65e5\u671f"),i.a.createElement(X.a,{value:L()(this.state.submitData.date,"YYYY-MM-DD"),format:"YYYY-MM-DD",onChange:this.dateChange})),i.a.createElement("div",{className:"btn-ctn"},i.a.createElement(U.a,{type:"primary",onClick:this.submitData},"\u63d0\u4ea4"),i.a.createElement(U.a,{style:{marginLeft:"20px"},onClick:this.backHome},"\u53d6\u6d88")))}},{key:"submitData",value:function(){var t=this.state.submitData;if(t.title&&t.title&&t.date){var e=!!this.props.match.params.id;e?bt.a.success("\u66f4\u65b0\u6210\u529f"):bt.a.success("\u65b0\u589e\u6210\u529f"),E(this.state.submitData,e),this.props.history.push("/")}else bt.a.error("\u8bf7\u586b\u5199\u5b8c\u6574\u7684\u8868\u5355")}},{key:"backHome",value:function(){this.props.history.push("/")}},{key:"inputChange",value:function(t){var e=Object(pt.a)({},this.state.submitData);e[t.target.name]=t.target.value,this.setState((function(){return{submitData:e}}))}},{key:"dateChange",value:function(t,e){var a=Object(pt.a)({},this.state.submitData);a.date=e,this.setState((function(){return{submitData:a}}))}},{key:"toggleTabs",value:function(t){var e=Object(pt.a)({},this.state.submitData);e.category.type=t,this.setState((function(){return{submitData:e}}))}},{key:"chooseClass",value:function(t){var e=Object(pt.a)({},this.state.submitData);e.category.name=t,this.setState((function(){return{submitData:e}}))}},{key:"getActivityDetail",value:function(t){for(var e=this,a=v("tableData"),n=function(n){a[n].id===t&&e.setState((function(){return{submitData:Object(pt.a)({},a[n])}}))},i=0;i<a.length;i++)n(i)}}]),e}(i.a.PureComponent),gt=Object(R.e)(yt);L.a.locale("zh");var Et=W.a.Header,Dt=W.a.Content,Ot=function(t){function e(){return Object(P.a)(this,e),Object(A.a)(this,Object(I.a)(e).apply(this,arguments))}return Object(F.a)(e,t),Object(_.a)(e,[{key:"render",value:function(){return i.a.createElement(J.a,null,i.a.createElement(B.a,{locale:H.a},i.a.createElement("div",{className:"App"},i.a.createElement(W.a,null,i.a.createElement(Et,{className:"header"},i.a.createElement(J.b,{to:"/"}," \u5728\u7ebf\u8d26\u672c\u7cfb\u7edf ")),i.a.createElement(Dt,null,i.a.createElement(R.a,{path:"/",exact:!0,component:ht}),i.a.createElement(R.a,{path:"/Create",component:gt}),i.a.createElement(R.a,{path:"/edit/:id",component:gt}))))))}}]),e}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var kt=i.a.createElement(l.a,{store:x},i.a.createElement(Ot,null));r.a.render(kt,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[348,1,2]]]);
//# sourceMappingURL=main.25506907.chunk.js.map